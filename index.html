<!DOCTYPE html>
<html>
<head>
    <title>Bootstrap 101 Template</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="css/imgareaselect-default.css" rel="stylesheet" media="screen">
    <link href="css/pick-a-color-1.1.7.min.css" rel="stylesheet" media="screen">
</head>
<body>

<div class="row">
    <svg
            xmlns="http://www.w3.org/2000/svg"
            width="500px"
            height="500px"
            id="svg2"
            class="col-4"
            version="1.1"
            inkscape:version="0.48.2 r9819"
            sodipodi:docname="karte2.svg">
        <defs
                id="defs4" ></defs>
        <clipPath id="myClipPath">
            <rect y="130.78326"
                  x="170.86511"
                  height="138.33719"
                  width="192.37482"> </rect>
        </clipPath>
        <g
                inkscape:groupmode="layer"
                id="layer2"
                inkscape:label="Ebene"
                style="display:inline">
            <path
                    style="fill:#b4ab57;fill-opacity:1;stroke:none"
                    d="m 167.5625,100.8125 c -2.48822,0.25514 -4.40625,2.40313 -4.40625,5 l 0,306.65625 c 0,2.77 2.21045,5 4.9375,5 l 199.25,0 c 2.72705,0 4.90625,-2.23 4.90625,-5 l 0,-306.65625 c 0,-2.77 -2.1792,-5 -4.90625,-5 l -199.25,0 c -0.17044,0 -0.36537,-0.017 -0.53125,0 z m 3.375,30.0625 192.40625,0 0,138.375 -192.40625,0 0,-138.375 z"
                    id="rect3967"
                    inkscape:connector-curvature="0" />
            <rect
                    style="fill:none;stroke:#000000;stroke-width:10;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
                    id="rect2985"
                    width="212.59842"
                    height="318.89764"
                    x="160.74835"
                    y="97.841301"
                    rx="10"
                    ry="10" />
        </g>
        <g
                inkscape:label="Ebene 1"
                inkscape:groupmode="layer"
                id="layer1"
                style="display:inline">
            <rect
                    style="fill:#000000;fill-opacity:0.18461537;stroke:none"
                    id="rect3755"
                    width="192.43407"
                    height="21.815451"
                    x="170.92497"
                    y="105.9358"
                    rx="4.8971725"
                    ry="5" />
            <rect
                    style="fill:#000000;fill-opacity:0.18461537;stroke:none"
                    id="rect3757"
                    width="0.50507629"
                    height="2.0203052"
                    x="362.85397"
                    y="129.58458"
                    rx="9.8346529e-016" />
            <rect
                    style="fill:#000000;fill-opacity:0.18461537;stroke:none"
                    id="rect3755-1"
                    width="192.43407"
                    height="114.62183"
                    x="170.92497"
                    y="293.64807"
                    rx="4.8971725"
                    ry="4.7889757" />
            <rect
                    style="fill:#000000;fill-opacity:0.18461537;stroke:none"
                    id="rect3755-1-7"
                    width="192.43407"
                    height="18.152266"
                    x="170.92497"
                    y="272.37793"
                    rx="4.9224806"
                    ry="5" />
        </g>
        <g
                inkscape:groupmode="layer"
                id="layer3"
                inkscape:label="Text"
                style="display:inline">
            <image
                    y="130.78326"
                    x="170.86511"
                    id="image3980"
                    xlink:href="file:///C:/Users/Sven/Pictures/DSCN0405.JPG"
                    height="138.33719"
                    clip-path="url(#myClipPath)"
                    width="192.37482" />
            <text x="177" y="123"
                  style="font-size:16px;font-style:normal;font-weight:bold;font-stretch:normal;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Comic Sans MS;-inkscape-font-specification:Comic Sans MS">
                Header</text>
            <text x="177" y="287"
                  style="font-size:14px;font-style:normal;font-weight:bold;font-stretch:normal;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Comic Sans MS;-inkscape-font-specification:Comic Sans MS">
                2. Header</text>
            <text x="177" y="307"
                  style="font-size:12px;font-style:normal;font-weight:normal;font-stretch:normal;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Comic Sans MS;-inkscape-font-specification:Comic Sans MS">
                <tspan>Text 1</tspan><tspan>Text 2</tspan></text>
            <flowRoot
           xml:space="preserve"
           id="flowRoot3779"
           style="font-size:40px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Comic Sans MS;-inkscape-font-specification:Comic Sans MS"
           transform="translate(-1.5587839,1.3051627)"><flowRegion
             id="flowRegion3781"><rect
               id="rect3783"
               width="184.35283"
               height="108.59139"
               x="176.7767"
               y="295.25284"
               style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Comic Sans MS;-inkscape-font-specification:Comic Sans MS" /></flowRegion><flowPara
             id="flowPara3785"
             style="font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Comic Sans MS;-inkscape-font-specification:Comic Sans MS">Kartentext: </flowPara><flowPara
             style="font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Comic Sans MS;-inkscape-font-specification:Comic Sans MS"
             id="flowPara3787"> dskamd kaÃ¶mkd a</flowPara><flowPara
             style="font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Comic Sans MS;-inkscape-font-specification:Comic Sans MS"
             id="flowPara3789"> dsa fdaf da</flowPara><flowPara
             style="font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Comic Sans MS;-inkscape-font-specification:Comic Sans MS"
             id="flowPara3791">f dsafdasdf  da</flowPara><flowPara
             style="font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Comic Sans MS;-inkscape-font-specification:Comic Sans MS"
             id="flowPara3793">fdsa ddsafjk nj lnjfda lnjfd anjda cnjd  cnjda cndja cjda cnjda ncjda cdcnjandjalasdj</flowPara></flowRoot>    <flowRoot
           transform="translate(-0.04355506,0.80008656)"
           xml:space="preserve"
           id="flowRoot3828"
           style="font-size:13px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Comic Sans MS;-inkscape-font-specification:Comic Sans MS"><flowRegion
             id="flowRegion3830"><rect
               id="rect3832"
               width="181.82747"
               height="15.1523"
               x="175.76654"
               y="273.53458"
               style="font-size:13px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Comic Sans MS;-inkscape-font-specification:Comic Sans MS" /></flowRegion><flowPara
             id="flowPara3834"
             style="font-size:13px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Comic Sans MS;-inkscape-font-specification:Comic Sans MS">Details</flowPara></flowRoot>    <flowRoot
           transform="translate(-1.0537076,-0.21006598)"
           xml:space="preserve"
           id="flowRoot3799"
           style="font-size:14px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Comic Sans MS;-inkscape-font-specification:Comic Sans MS Bold"><flowRegion
             id="flowRegion3801"><rect
               id="rect3803"
               width="183.34268"
               height="16.667517"
               x="175.76654"
               y="108.37463"
               style="font-size:14px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Comic Sans MS;-inkscape-font-specification:Comic Sans MS Bold" /></flowRegion><flowPara
             id="flowPara3805"
             style="font-size:14px;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Comic Sans MS;-inkscape-font-specification:Comic Sans MS Bold">Kartenname</flowPara>

             </flowRoot>  </g>
    </svg>
    <div class="col-8">
        <ul class="nav nav-tabs " id="myTab">
            <li><a href="#image" data-toggle="tab">Image</a></li>
            <li><a href="#color" data-toggle="tab">Color</a></li>
            <li><a href="#messages" data-toggle="tab">Messages</a></li>
            <li><a href="#settings" data-toggle="tab">Settings</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane active" id="image">
                <input type="file" id="fileSelection" onchange="readURL(this);"/>
                <img id="selImage" src="#" width="400px"></div>
            <div class="tab-pane" id="color">
                <input type="text" value="000" name="border-color" class="pick-a-color" onchange="setBGColor(this);">
            </div>
            <div class="tab-pane" id="messages">...</div>
            <div class="tab-pane" id="settings">...</div>
        </div>
    </div>
</div>
<!-- JavaScript plugins (requires jQuery) -->
<script src="js/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.imgareaselect.js"></script>
<script src="js/tinycolor-0.9.15.min.js"></script>
<script src="js/pick-a-color-1.1.7.min.js"></script>
<script>
    var imgAreaSelect;
    var currentSelection;
    $(document).ready(function() {
        $("#image3980").attr("xlink:href","http://static3.fjcdn.com/comments/Not+Today+_1bf02d92ef88bec70fac698a594f052c.jpg");
        $(".pick-a-color").pickAColor();
    });
    $('#myTab a').click(function (e) {
        e.preventDefault();
        $(this).tab('show');
        if ($(this).attr("href")=="#image") {
            imgAreaSelect.setOptions({ show: true, x1: currentSelection.x1, x2: currentSelection.x2,
                y1: currentSelection.y1, y2: currentSelection.y2});
        } else {
            imgAreaSelect.setOptions({ hide: true });
        }
    });

    function preview(img, selection){
        if (selection.width >0 && selection.height>0){
            currentSelection = selection;
            var scaleX = 192 / (selection.width || 1);
            var scaleY = 138 / (selection.height || 1);
            var h = scaleY * img.height;
            var w = scaleX * img.width;
            var ml = Math.round(scaleX * selection.x1);
            var mt = Math.round(scaleY * selection.y1);
            $("#image3980").attr("width", w);
            $("#image3980").attr("height", h);
            $("#image3980").attr("x", 171-ml);
            $("#image3980").attr("y", 131-mt);
        }
    }

    function readURL(input1){
        if (input1.files && input1.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $("#image3980").attr("xlink:href",e.target.result);
                $("#selImage").attr("src", e.target.result);
                imgAreaSelect = $('img#selImage').imgAreaSelect({
                    handles: true,
                    instance: true,
                    aspectRatio: '192:138',
                    onSelectChange: preview
                });
            };
            reader.readAsDataURL(input1.files[0]);
        }
    }
    function setBGColor(input1) {
        $("#rect3967").css("fill", "#"+$(input1).val());
    }
</script>
</body>
</html>
